---
export interface Props {
  type: 'success' | 'error' | 'warning' | 'info';
  message: string;
  dismissible?: boolean;
}

const { type, message, dismissible = true } = Astro.props;

const styles = {
  success: {
    bg: 'bg-green-50',
    border: 'border-green-200',
    text: 'text-green-800',
    icon: '✓'
  },
  error: {
    bg: 'bg-red-50',
    border: 'border-red-200',
    text: 'text-red-800',
    icon: '✕'
  },
  warning: {
    bg: 'bg-yellow-50',
    border: 'border-yellow-200',
    text: 'text-yellow-800',
    icon: '!'
  },
  info: {
    bg: 'bg-blue-50',
    border: 'border-blue-200',
    text: 'text-blue-800',
    icon: 'ℹ'
  }
};

const style = styles[type];
---

<div
  class={`${style.bg} border ${style.border} ${style.text} px-4 py-3 rounded-lg flex items-start gap-3`}
  role="alert"
>
  <span class="font-bold text-lg flex-shrink-0">{style.icon}</span>
  <div class="flex-grow">
    <p>{message}</p>
  </div>
  {dismissible && (
    <button
      type="button"
      class={`flex-shrink-0 ml-auto ${style.text} hover:opacity-50 transition-opacity`}
      onclick="this.parentElement.style.display='none';"
      aria-label="Dismiss alert"
    >
      ✕
    </button>
  )}
</div>
